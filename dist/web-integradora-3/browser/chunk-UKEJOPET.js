import{a as j,b as k,c as N,d as q,e as G,f as b,g as A,j as D,k as R,r as V}from"./chunk-BZHRZEYF.js";import{a as M}from"./chunk-MVAYTFKK.js";import{a as T}from"./chunk-67ANC6KW.js";import{j as I,k as L}from"./chunk-6X3NTM2I.js";import{Ab as d,Ib as l,Jb as m,Qb as C,Rb as x,Sa as i,Sb as h,Ta as v,ga as E,gb as u,ib as s,ic as w,kc as S,lc as F,qb as t,ra as _,rb as n,sa as y,sb as g,yb as f}from"./chunk-QODOQ2ZI.js";var H=()=>["/password-recovery"],z=e=>({hidden:e}),O=()=>["/register"];function P(e,a){e&1&&(t(0,"p",25),l(1,"El correo es requerido"),n())}function U(e,a){if(e&1&&(t(0,"div"),u(1,P,2,0,"p",24),n()),e&2){let c=d();i(),s("ngIf",c.loginForm.controls.email.errors.required)}}function Y(e,a){e&1&&(t(0,"p",25),l(1,"La contrase\xF1a es requerida"),n())}function J(e,a){if(e&1&&(t(0,"div"),u(1,Y,2,0,"p",24),n()),e&2){let c=d();i(),s("ngIf",c.loginForm.controls.password.errors.required)}}function K(e,a){if(e&1&&(t(0,"div")(1,"p",25),l(2),n()()),e&2){let c=d();i(2),m(c.backendErrors.credenciales)}}function Q(e,a){if(e&1&&(t(0,"div")(1,"p",25),l(2),n()()),e&2){let c=d();i(2),m(c.backendErrors.email)}}function W(e,a){if(e&1&&(t(0,"div")(1,"p",26),l(2),n()()),e&2){let c=d();i(2),m(c.succesMessages.message)}}function X(e,a){if(e&1&&(t(0,"div")(1,"p",25),l(2),n()()),e&2){let c=d();i(2),m(c.backendErrors.message)}}function Z(e,a){if(e&1&&(t(0,"div")(1,"p",25),l(2),n()()),e&2){let c=d();i(2),m(c.backendErrors.active)}}function $(e,a){if(e&1&&(t(0,"div")(1,"p",25),l(2),n()()),e&2){let c=d();i(2),m(c.backendErrors.activeAdmin)}}var ce=(()=>{let a=class a{constructor(o,p,r){this.userService=o,this.cookie=p,this.router=r,this.hide=!0,this.backendErrors={},this.succesMessages={},this.loginForm=new G({email:new b("",[k.required]),password:new b("",[k.required])})}login(){this.loginForm.valid&&this.userService.logCode(this.loginForm.value.email,this.loginForm.value.password).subscribe({next:o=>{console.log(o),localStorage.setItem("email",this.loginForm.value.email),localStorage.setItem("password",this.loginForm.value.password),this.succesMessages.message="Loggeo Exitoso",this.backendErrors.email=null,this.backendErrors.credenciales=null,this.backendErrors.active=null,this.backendErrors.activeAdmin=null,setTimeout(()=>{this.backendErrors={},this.router.navigate(["/code-verificacion"])},3e3)},error:o=>{console.log(o),o.status===401&&o.error.credenciales?(console.log(o.error),this.backendErrors.credenciales="Credenciales incorrectas",this.backendErrors.active=null,this.backendErrors.email=null):o.status===401&&o.error.active?(console.log(o.error),this.backendErrors.credenciales=null,this.backendErrors.active="Primero debe activar la cuenta",this.backendErrors.email=null):o.status===404?(console.log(o.error),this.backendErrors.email="El email no est\xE1 registrado",this.backendErrors.credenciales=null):o.status===403?(console.log(o.error),this.backendErrors.email=null,this.backendErrors.credenciales=null,this.backendErrors.activeAdmin="Su cuenta ha sido desactivada por los administradores"):(this.backendErrors.email=null,this.backendErrors.credenciales=null,this.backendErrors={message:"Error al loggearse, intente mas tarde"})}})}};a.\u0275fac=function(p){return new(p||a)(v(M),v(T),v(I))},a.\u0275cmp=E({type:a,selectors:[["app-login"]],standalone:!0,features:[C],decls:43,vars:20,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],["src","assets/logo.jpeg","alt","Your Company",1,"mx-auto","h-32","w-auto"],[1,"mt-5","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-violet-950"],[1,"mt-5","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"formGroup"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["formControlName","email",1,"block","w-full","pl-3","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-purple-600","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[4,"ngIf"],[1,"flex","items-center","justify-between"],[1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"text-sm"],[1,"font-semibold","text-purple-500","hover:text-purple-600",3,"routerLink"],[1,"mt-2","relative"],["formControlName","password","id","password","name","password",1,"block","w-full","pl-3","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-purple-600","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6",3,"type"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.5 12c2.264 4.5 6.236 7.5 11.5 7.5s9.236-3 11.5-7.5-2.264-7.5-6.5-7.5-9.236 3-11.5 7.5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 12a2 2 0 014 0"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-cyan-700","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-fuchsia-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[1,"mt-10","text-center","text-sm","text-gray-500"],[1,"font-semibold","leading-6","text-purple-500","hover:text-purple-600",3,"routerLink"],["class","text-red-500 font-medium text-sm",4,"ngIf"],[1,"text-red-500","font-medium","text-sm"],[1,"text-green-500","font-medium","text-sm"]],template:function(p,r){p&1&&(t(0,"div",0)(1,"div",1),g(2,"img",2),t(3,"h2",3),l(4,"Inicie sesion en su cuenta"),n()(),t(5,"div",4)(6,"form",5)(7,"div")(8,"label",6),l(9,"Correo"),n(),t(10,"div",7),g(11,"input",8),n(),u(12,U,2,1,"div",9),n(),t(13,"div")(14,"div",10)(15,"label",11),l(16,"Contrase\xF1a"),n(),t(17,"div",12)(18,"a",13),l(19,"Olvidaste la contrase\xF1a?"),n()()(),t(20,"div",14),g(21,"input",15),t(22,"div",16),f("click",function(){return r.hide=!r.hide}),_(),t(23,"svg",17),g(24,"path",18)(25,"path",19),n(),t(26,"svg",17),g(27,"path",20)(28,"path",19),n()()(),u(29,J,2,1,"div",9),n(),u(30,K,3,1,"div",9)(31,Q,3,1,"div",9)(32,W,3,1,"div",9)(33,X,3,1,"div",9)(34,Z,3,1,"div",9)(35,$,3,1,"div",9),y(),t(36,"div")(37,"button",21),f("click",function(){return r.login()}),l(38,"Iniciar Sesion"),n()()(),t(39,"p",22),l(40," No tienes cuenta? "),t(41,"a",23),l(42,"Registrate aqui"),n()()()()),p&2&&(i(6),s("formGroup",r.loginForm),i(6),s("ngIf",r.loginForm.controls.email.errors&&r.loginForm.controls.email.touched),i(6),s("routerLink",x(14,H)),i(3),s("type",r.hide?"password":"text"),i(2),s("ngClass",h(15,z,!r.hide)),i(3),s("ngClass",h(17,z,r.hide)),i(3),s("ngIf",r.loginForm.controls.password.errors&&r.loginForm.controls.password.touched),i(),s("ngIf",r.backendErrors.credenciales),i(),s("ngIf",r.backendErrors.email),i(),s("ngIf",r.succesMessages.message),i(),s("ngIf",r.backendErrors.message),i(),s("ngIf",r.backendErrors.active),i(),s("ngIf",r.backendErrors.activeAdmin),i(6),s("routerLink",x(19,O)))},dependencies:[L,F,w,S,V,A,j,N,q,D,R]});let e=a;return e})();export{ce as LoginComponent};
