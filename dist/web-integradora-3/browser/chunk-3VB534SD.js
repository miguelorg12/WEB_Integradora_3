import{a as j}from"./chunk-JQJ4TIQC.js";import{a as H}from"./chunk-PVJ7IEF6.js";import"./chunk-2PNSS65N.js";import{a as S,b as d,c as I,d as w,e as k,f as v,g as T,j as M,k as U,p as q,r as N}from"./chunk-BZHRZEYF.js";import"./chunk-67ANC6KW.js";import{h as C,j as F}from"./chunk-6X3NTM2I.js";import{Ab as g,Ib as r,Jb as x,Qb as b,Sa as n,Ta as f,ga as h,gb as p,ib as s,kc as E,lc as y,qb as i,rb as t,sb as u,yb as _}from"./chunk-QODOQ2ZI.js";function L(e,o){e&1&&(i(0,"p",14),r(1,"El diagn\xF3stico es requerido"),t())}function A(e,o){e&1&&(i(0,"p",14),r(1,"El diagn\xF3stico debe contener al menos 3 caracteres"),t())}function D(e,o){e&1&&(i(0,"p",14),r(1,"El diagn\xF3stico debe contener maximo 255 caracteres"),t())}function G(e,o){if(e&1&&(i(0,"div"),p(1,L,2,0,"p",13)(2,A,2,0,"p",13)(3,D,2,0,"p",13),t()),e&2){let m=g();n(),s("ngIf",m.Form.controls.diagnostico.errors.required),n(),s("ngIf",m.Form.controls.diagnostico.errors.minlength),n(),s("ngIf",m.Form.controls.diagnostico.errors.maxlength)}}function R(e,o){e&1&&(i(0,"p",14),r(1,"El medicamento es requerido"),t())}function V(e,o){e&1&&(i(0,"p",14),r(1,"El medicamento debe contener al menos 3 caracteres"),t())}function z(e,o){e&1&&(i(0,"p",14),r(1,"El medicamento debe contener maximo 255 caracteres"),t())}function B(e,o){if(e&1&&(i(0,"div"),p(1,R,2,0,"p",13)(2,V,2,0,"p",13)(3,z,2,0,"p",13),t()),e&2){let m=g();n(),s("ngIf",m.Form.controls.medicamentos.errors.required),n(),s("ngIf",m.Form.controls.medicamentos.errors.minlength),n(),s("ngIf",m.Form.controls.medicamentos.errors.maxlength)}}function J(e,o){if(e&1&&(i(0,"div")(1,"p",15),r(2),t()()),e&2){let m=g();n(2),x(m.succesMessages.message)}}function K(e,o){if(e&1&&(i(0,"div")(1,"p",14),r(2),t()()),e&2){let m=g();n(2),x(m.backendErrors.message)}}var te=(()=>{let o=class o{constructor(a,c,l){this.historialService=a,this.router=c,this.route=l,this.backendErrors={},this.succesMessages={},this.Form=new k({diagnostico:new v("",[d.required,d.minLength(3),d.maxLength(255)]),medicamentos:new v("",[d.required,d.minLength(3),d.maxLength(100)])})}ngAfterContentInit(){this.id_historial=Number(this.route.snapshot.params.id),this.historialService.getHistorialbyId(this.id_historial).subscribe({next:a=>{console.log(a),this.Form.patchValue(a.data)},error:a=>{console.log(a)}})}updateHistorial(){this.historialService.updateHistorial(this.Form.value,this.id_historial).subscribe({next:a=>{console.log(a),this.succesMessages.message="Historial actualizado con \xE9xito",this.backendErrors.message="",setTimeout(()=>{this.backendErrors.message="",this.router.navigate(["/historial"])},2e3)},error:a=>{console.log(a),this.succesMessages.message="",this.backendErrors.message="Error para actualizar el historial, intente mas tarde"}})}};o.\u0275fac=function(c){return new(c||o)(f(j),f(F),f(C))},o.\u0275cmp=h({type:o,selectors:[["app-update"]],standalone:!0,features:[b],decls:25,vars:5,consts:[[1,"flex","mt-10","flex-col","justify-center"],[1,"sm:mx-auto","sm:w-1/2","sm:max-w-2xl"],["src","assets/logo.jpeg","alt","Logo",1,"mx-auto","h-32","w-auto"],[1,"mt-3","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-violet-950"],[1,"sm:mx-auto","sm:w-1/3","sm:max-w-2xl"],[1,"space-y-2",3,"formGroup"],["for","diagnosis",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["formControlName","diagnostico","name","diagnosis","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[4,"ngIf"],["for","medication",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","medicamentos","name","diagnosis","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-fuchsia-500","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-cyan-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],["class","text-red-500 font-medium text-sm",4,"ngIf"],[1,"text-red-500","font-medium","text-sm"],[1,"text-green-500","font-medium","text-sm"]],template:function(c,l){c&1&&(u(0,"app-toolbar"),i(1,"div",0)(2,"div",1),u(3,"img",2),i(4,"h2",3),r(5,"Actualizar Historial M\xE9dico"),t()(),i(6,"div",4)(7,"form",5)(8,"div")(9,"label",6),r(10,"Diagn\xF3stico"),t(),i(11,"div",7),u(12,"textarea",8),t(),p(13,G,4,3,"div",9),t(),i(14,"div")(15,"label",10),r(16,"Medicamento Suministrado"),t(),i(17,"div",7),u(18,"textarea",11),t(),p(19,B,4,3,"div",9),t(),p(20,J,3,1,"div",9)(21,K,3,1,"div",9),i(22,"div")(23,"button",12),_("click",function(){return l.updateHistorial()}),r(24,"Actualizar Historial"),t()()()()()),c&2&&(n(7),s("formGroup",l.Form),n(6),s("ngIf",l.Form.controls.diagnostico.errors&&l.Form.controls.diagnostico.touched),n(6),s("ngIf",l.Form.controls.medicamentos.errors&&l.Form.controls.medicamentos.touched),n(),s("ngIf",l.succesMessages.message),n(),s("ngIf",l.backendErrors.message))},dependencies:[H,N,T,S,I,w,q,M,U,y,E]});let e=o;return e})();export{te as UpdateComponent};
