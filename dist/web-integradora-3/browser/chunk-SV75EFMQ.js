import{a as U}from"./chunk-QVIXLOYS.js";import{a as M,b as d,c as G,d as V,e as A,f as u,g as H,j as P,k as D,l as O,m as z,n as $,p as B,r as Z}from"./chunk-FA5XPTQ2.js";import{a as j}from"./chunk-BI5OWTDL.js";import{a as N}from"./chunk-JRUOX2RA.js";import{j as q,k as L}from"./chunk-SD2P4HH3.js";import{Bb as g,Jb as s,Kb as v,Rb as S,Sb as F,Ta as r,Tb as x,Ua as _,ga as w,hb as p,jb as n,lc as k,mc as I,nc as R,pc as T,rb as i,sa as b,sb as t,ta as C,tb as c,zb as y}from"./chunk-XQ3MI7UQ.js";var E=e=>({hidden:e}),Y=()=>["/login"];function J(e,o){e&1&&(i(0,"p",35),s(1,"El nombre es requerido"),t())}function K(e,o){e&1&&(i(0,"p",35),s(1,"El nombre debe tener al menos 3 caracteres"),t())}function Q(e,o){e&1&&(i(0,"p",35),s(1,"El nombre debe tener m\xE1ximo 50 caracteres"),t())}function W(e,o){e&1&&(i(0,"p",35),s(1,"El nombre solo debe contener letras y espacios"),t())}function X(e,o){if(e&1&&(i(0,"div"),p(1,J,2,0,"p",34)(2,K,2,0,"p",34)(3,Q,2,0,"p",34)(4,W,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.name.errors.required),r(),n("ngIf",l.registerForm.controls.name.errors.minlength),r(),n("ngIf",l.registerForm.controls.name.errors.maxlength),r(),n("ngIf",l.registerForm.controls.name.errors.pattern)}}function ee(e,o){e&1&&(i(0,"p",35),s(1,"Los apellidos son requeridos"),t())}function te(e,o){e&1&&(i(0,"p",35),s(1,"Los apellidos deben tener al menos 3 caracteres"),t())}function ie(e,o){e&1&&(i(0,"p",35),s(1,"Los apellidos deben tener m\xE1ximo 50 caracteres"),t())}function re(e,o){e&1&&(i(0,"p",35),s(1,"Los apellidos solos pueden contener letras y espacios"),t())}function ne(e,o){if(e&1&&(i(0,"div"),p(1,ee,2,0,"p",34)(2,te,2,0,"p",34)(3,ie,2,0,"p",34)(4,re,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.last_name.errors.required),r(),n("ngIf",l.registerForm.controls.last_name.errors.minlength),r(),n("ngIf",l.registerForm.controls.last_name.errors.maxlength),r(),n("ngIf",l.registerForm.controls.last_name.errors.maxlength)}}function oe(e,o){e&1&&(i(0,"p",35),s(1,"El correo es requerido"),t())}function ae(e,o){e&1&&(i(0,"p",35),s(1,"Ingrese un correo valido"),t())}function se(e,o){e&1&&(i(0,"p",35),s(1,"El correo tiene un maximo de 255 caracteres"),t())}function le(e,o){if(e&1&&(i(0,"div"),p(1,oe,2,0,"p",34)(2,ae,2,0,"p",34)(3,se,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.email.errors.required),r(),n("ngIf",l.registerForm.controls.email.errors.email),r(),n("ngIf",l.registerForm.controls.email.errors.maxlength)}}function me(e,o){if(e&1&&(i(0,"div")(1,"p",35),s(2),t()()),e&2){let l=g();r(2),v(l.backendErrors.email)}}function de(e,o){e&1&&(i(0,"p",35),s(1,"La contrase\xF1a es requerida"),t())}function pe(e,o){e&1&&(i(0,"p",35),s(1,"La contrase\xF1a debe contener al menos 8 caracteres"),t())}function ce(e,o){if(e&1&&(i(0,"div"),p(1,de,2,0,"p",34)(2,pe,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.password.errors.required),r(),n("ngIf",l.registerForm.controls.password.errors.minlength)}}function ge(e,o){e&1&&(i(0,"p",35),s(1,"La confirmacion de contrase\xF1a es requerida"),t())}function ue(e,o){if(e&1&&(i(0,"div"),p(1,ge,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.confirm_password.errors.required)}}function fe(e,o){if(e&1&&(i(0,"div")(1,"p",35),s(2),t()()),e&2){let l=g();r(2),v(l.backendErrors.confirm_password)}}function _e(e,o){e&1&&(i(0,"option",36),s(1,"No hay hospitales disponibles"),t())}function ve(e,o){e&1&&(i(0,"option",36),s(1,"Selecciona un hospital"),t())}function xe(e,o){if(e&1&&(i(0,"option",37),s(1),t()),e&2){let l=o.$implicit;n("value",l.id),r(),v(l.nombre)}}function he(e,o){e&1&&(i(0,"p",35),s(1,"El hospital es requerido"),t())}function ye(e,o){if(e&1&&(i(0,"div"),p(1,he,2,0,"p",34),t()),e&2){let l=g();r(),n("ngIf",l.registerForm.controls.id_hospital.errors.required)}}function Ee(e,o){if(e&1&&(i(0,"div",38)(1,"p",35),s(2),t()()),e&2){let l=g();r(2),v(l.backendErrors.message)}}var Le=(()=>{let o=class o{constructor(m,f,a,h){this.router=m,this.userService=f,this.hospitalService=a,this.cookie=h,this.hospitales=[],this.backendErrors={},this.hide=!0,this.hideConfirmPassword=!0,this.registerForm=new A({name:new u("",[d.required,d.minLength(3),d.maxLength(50),d.pattern("^[a-zA-Z ]*$")]),last_name:new u("",[d.required,d.minLength(3),d.maxLength(50),d.pattern("^[a-zA-Z ]*$")]),email:new u("",[d.required,d.email,d.maxLength(255)]),password:new u("",[d.required,d.minLength(8)]),confirm_password:new u("",[d.required]),id_hospital:new u("",[d.required])})}ngAfterContentInit(){this.hospitalService.getHospitalesNtoken().subscribe(m=>{this.hospitales=m.Hospitales,console.log(this.hospitales),console.log(m)})}register(){this.registerForm.valid&&this.userService.register(this.registerForm.value).subscribe({next:m=>{console.log(m),this.router.navigate(["/check-email"]),this.cookie.set("id",m.id,5/60/24)},error:m=>{console.log(m),console.log(this.registerForm.value),m.status===400&&(console.log(m.error),m.error.Errors.email&&m.error.Errors.confirm_password?(this.backendErrors.email="El email ya est\xE1 en uso",this.backendErrors.confirm_password="Las contrase\xF1as no coinciden"):m.error.Errors.email?(this.backendErrors.email="El email ya est\xE1 en uso",this.backendErrors.confirm_password=null):m.error.Errors.confirm_password?(this.backendErrors.email=null,this.backendErrors.confirm_password="Las contrase\xF1as no coinciden"):this.backendErrors={message:"Error al registrarse, intente m\xE1s tarde"})}})}};o.\u0275fac=function(f){return new(f||o)(_(q),_(j),_(U),_(N))},o.\u0275cmp=w({type:o,selectors:[["app-register"]],standalone:!0,features:[S],decls:75,vars:29,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-2","lg:px-8"],[1,"sm:mx-auto","sm:w-1/2","sm:max-w-2xl"],["src","assets/logo.jpeg","alt","Logo",1,"mx-auto","h-32","w-auto"],[1,"mt-3","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-violet-950"],[1,"sm:mx-auto","sm:w-1/3","sm:max-w-2xl"],[3,"formGroup"],["for","name",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,""],["formControlName","name","name","name","type","text","autocomplete","nombre","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[4,"ngIf"],["for","lastname",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","last_name","name","lastname","type","text","autocomplete","nombre","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","email","name","email","type","email","autocomplete","email","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2","relative"],["formControlName","password","name","password","autocomplete","current-password",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6",3,"type"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"h-5","w-5",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.5 12c2.264 4.5 6.236 7.5 11.5 7.5s9.236-3 11.5-7.5-2.264-7.5-6.5-7.5-9.236 3-11.5 7.5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 12a2 2 0 014 0"],["for","confirm_password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","confirm_password","name","confirm_password",1,"block","w-full","pl-3","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-purple-600","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6",3,"type"],["for","hospital",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","id_hospital","id","hospital","name","hospital",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["type","submit",1,"flex","w-full","justify-center","mt-5","rounded-md","bg-fuchsia-500","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-cyan-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[1,"mb-10"],[1,"mt-5","text-center","text-sm","text-gray-500"],[1,"font-semibold","mb-10","leading-6","text-purple-500","hover:text-purple-600",3,"routerLink"],["class","text-red-500 font-medium text-sm",4,"ngIf"],[1,"text-red-500","font-medium","text-sm"],["value",""],[3,"value"],[1,"mt-2"]],template:function(f,a){f&1&&(i(0,"div",0)(1,"div",1),c(2,"img",2),i(3,"h2",3),s(4,"Registra tu usuario"),t()(),i(5,"div",4)(6,"form",5)(7,"div")(8,"label",6),s(9,"Nombre(s)"),t(),i(10,"div",7),c(11,"input",8),t(),p(12,X,5,4,"div",9),t(),i(13,"div")(14,"label",10),s(15,"Apellidos"),t(),i(16,"div",7),c(17,"input",11),t(),p(18,ne,5,4,"div",9),t(),i(19,"div")(20,"label",12),s(21,"Correo"),t(),i(22,"div",7),c(23,"input",13),t(),p(24,le,4,3,"div",9)(25,me,3,1,"div",9),t(),i(26,"div")(27,"div",14)(28,"label",15),s(29,"Contrase\xF1a"),t()(),i(30,"div",16),c(31,"input",17),i(32,"div",18),y("click",function(){return a.hide=!a.hide}),b(),i(33,"svg",19),c(34,"path",20)(35,"path",21),t(),i(36,"svg",19),c(37,"path",22)(38,"path",21),t()()(),p(39,ce,3,2,"div",9),t(),C(),i(40,"div")(41,"div",14)(42,"label",23),s(43,"Confirmar contrase\xF1a"),t()(),i(44,"div")(45,"div",16),c(46,"input",24),i(47,"div",18),y("click",function(){return a.hideConfirmPassword=!a.hideConfirmPassword}),b(),i(48,"svg",19),c(49,"path",20)(50,"path",21),t(),i(51,"svg",19),c(52,"path",22)(53,"path",21),t()()(),p(54,ue,2,1,"div",9)(55,fe,3,1,"div",9),t(),C(),i(56,"div")(57,"div",14)(58,"label",25),s(59,"Hospital"),t()(),i(60,"div",7)(61,"select",26),p(62,_e,2,0,"option",27)(63,ve,2,0,"option",27)(64,xe,2,2,"option",28),t()(),p(65,ye,2,1,"div",9),t(),p(66,Ee,3,1,"div",29),t(),i(67,"div")(68,"button",30),y("click",function(){return a.register()}),s(69,"Registrar"),t()(),i(70,"div",31)(71,"p",32),s(72," \xBFYa tienes cuenta? "),i(73,"a",33),s(74,"Inicia sesi\xF3n aqu\xED"),t()()()()()()),f&2&&(r(6),n("formGroup",a.registerForm),r(6),n("ngIf",a.registerForm.controls.name.errors&&a.registerForm.controls.name.touched),r(6),n("ngIf",a.registerForm.controls.last_name.errors&&a.registerForm.controls.last_name.touched),r(6),n("ngIf",a.registerForm.controls.email.errors&&a.registerForm.controls.email.touched),r(),n("ngIf",a.backendErrors.email),r(6),n("type",a.hide?"password":"text"),r(2),n("ngClass",x(20,E,!a.hide)),r(3),n("ngClass",x(22,E,a.hide)),r(3),n("ngIf",a.registerForm.controls.password.errors&&a.registerForm.controls.password.touched),r(7),n("type",a.hideConfirmPassword?"password":"text"),r(2),n("ngClass",x(24,E,!a.hideConfirmPassword)),r(3),n("ngClass",x(26,E,a.hideConfirmPassword)),r(3),n("ngIf",a.registerForm.controls.confirm_password.errors&&a.registerForm.controls.confirm_password.touched),r(),n("ngIf",a.backendErrors.confirm_password),r(7),n("ngIf",a.hospitales.length==0),r(),n("ngIf",a.hospitales.length>0),r(),n("ngForOf",a.hospitales),r(),n("ngIf",a.registerForm.controls.id_hospital.errors&&a.registerForm.controls.id_hospital.touched),r(),n("ngIf",a.backendErrors.message),r(7),n("routerLink",F(28,Y)))},dependencies:[L,Z,H,z,$,M,O,G,V,B,P,D,T,k,I,R]});let e=o;return e})();export{Le as RegisterComponent};
