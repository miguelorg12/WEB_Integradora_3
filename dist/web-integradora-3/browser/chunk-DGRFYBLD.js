import{a as H}from"./chunk-OAQBFJTG.js";import{a as D}from"./chunk-GUIL43MT.js";import{a as G}from"./chunk-QVIXLOYS.js";import"./chunk-FEMZR6YW.js";import{a as k,b as p,c as T,d as q,e as N,f,g as M,j as A,k as L,l as j,m as R,n as z,p as O,r as V}from"./chunk-FA5XPTQ2.js";import{a as w}from"./chunk-BI5OWTDL.js";import{a as U}from"./chunk-JRUOX2RA.js";import{h as I,j as F}from"./chunk-SD2P4HH3.js";import{Bb as c,Jb as a,Kb as x,Rb as b,Ta as r,Ua as u,ga as h,hb as d,jb as l,mc as E,nc as S,pc as C,rb as i,sb as t,tb as _,zb as y}from"./chunk-XQ3MI7UQ.js";function B(e,o){e&1&&(i(0,"p",20),a(1,"El nombre es requerido"),t())}function J(e,o){e&1&&(i(0,"p",20),a(1,"El nombre tiene un minimo de 3 caracteres"),t())}function K(e,o){e&1&&(i(0,"p",20),a(1,"El nombre tiene un maximo de 50 caracteres"),t())}function P(e,o){e&1&&(i(0,"p",20),a(1,"El nombre solo puede contener espacios y letras"),t())}function Q(e,o){if(e&1&&(i(0,"div"),d(1,B,2,0,"p",19)(2,J,2,0,"p",19)(3,K,2,0,"p",19)(4,P,2,0,"p",19),t()),e&2){let n=c();r(),l("ngIf",n.updateForm.controls.name.errors.required),r(),l("ngIf",n.updateForm.controls.name.errors.minlength),r(),l("ngIf",n.updateForm.controls.name.errors.maxlength),r(),l("ngIf",n.updateForm.controls.name.errors.pattern)}}function W(e,o){e&1&&(i(0,"p",20),a(1,"Los apellidos son requeridos"),t())}function X(e,o){e&1&&(i(0,"p",20),a(1,"Los apellidos tienen un minimo de 3 caracteres"),t())}function Y(e,o){e&1&&(i(0,"p",20),a(1,"Los apellidos tienen un maximo de 50 caracteres"),t())}function ee(e,o){e&1&&(i(0,"p",20),a(1,"Los apellidos solo pueden contener espacios y letras"),t())}function te(e,o){if(e&1&&(i(0,"div"),d(1,W,2,0,"p",19)(2,X,2,0,"p",19)(3,Y,2,0,"p",19)(4,ee,2,0,"p",19),t()),e&2){let n=c();r(),l("ngIf",n.updateForm.controls.last_name.errors.required),r(),l("ngIf",n.updateForm.controls.last_name.errors.minlength),r(),l("ngIf",n.updateForm.controls.last_name.errors.maxlength),r(),l("ngIf",n.updateForm.controls.last_name.errors.pattern)}}function ie(e,o){e&1&&(i(0,"p",20),a(1,"El rol es requerido"),t())}function oe(e,o){if(e&1&&(i(0,"div"),d(1,ie,2,0,"p",19),t()),e&2){let n=c();r(),l("ngIf",n.updateForm.controls.id_rol.errors.required)}}function ne(e,o){if(e&1&&(i(0,"option",21),a(1),t()),e&2){let n=o.$implicit;l("value",n.id),r(),x(n.nombre)}}function re(e,o){e&1&&(i(0,"p",20),a(1,"El rol es requerido"),t())}function ae(e,o){if(e&1&&(i(0,"div"),d(1,re,2,0,"p",19),t()),e&2){let n=c();r(),l("ngIf",n.updateForm.controls.id_rol.errors.required)}}function se(e,o){if(e&1&&(i(0,"option",21),a(1),t()),e&2){let n=o.$implicit;l("value",n.id),r(),x(n.nombre)}}function le(e,o){if(e&1&&(i(0,"div")(1,"label",22),a(2,"Hospital"),t(),i(3,"div",7)(4,"select",23),d(5,se,2,2,"option",17),t()()()),e&2){let n=c();r(5),l("ngForOf",n.hospitales)}}function me(e,o){if(e&1&&(i(0,"div")(1,"p",24),a(2),t()()),e&2){let n=c();r(2),x(n.succesMessages.message)}}function de(e,o){if(e&1&&(i(0,"div")(1,"p",24),a(2),t()()),e&2){let n=c();r(2),x(n.backendErrors.message)}}var Ee=(()=>{let o=class o{constructor(s,g,m,v,$,Z){this.userService=s,this.rolesService=g,this.cookie=m,this.route=v,this.router=$,this.hospitalesService=Z,this.roles=[],this.hospitales=[],this.userid=0,this.backendErrors={},this.succesMessages={},this.updateForm=new N({name:new f("",[p.required,p.minLength(3),p.maxLength(50),p.pattern("^[a-zA-Z ]*$")]),last_name:new f("",[p.required,p.minLength(3),p.maxLength(50),p.pattern("^[a-zA-Z ]*$")]),id_rol:new f("",[p.required]),id_hospital:new f(""),is_active:new f("",[p.required])})}ngAfterContentInit(){this.rolUser=this.cookie.get("id_rol"),this.rolesService.getRoles().subscribe({next:s=>{this.roles=s.data,console.log(s),console.log(this.roles)},error:s=>{console.log(s)}}),this.hospitalesService.getHospitales().subscribe({next:s=>{console.log(s),this.hospitales=s.Hospitales,console.log(this.hospitales)},error:s=>{console.log(s)}}),this.userid=Number(this.route.snapshot.paramMap.get("id")),this.userService.getUserbyId(this.userid).subscribe({next:s=>{this.user=s.data,this.updateForm.setValue({name:this.user.name,last_name:this.user.last_name,id_rol:this.user.id_rol,id_hospital:this.user.id_hospital,is_active:this.user.is_active}),console.log(this.user)},error:s=>{console.log(s)}})}updateUser(){console.log(this.updateForm.value),this.updateForm.valid&&this.userService.updateUser(this.updateForm.value,this.userid).subscribe({next:s=>{console.log(s),this.succesMessages.message="Usuario actualizado exitosamente",setTimeout(()=>{this.router.navigate(["/usuarios"]),this.succesMessages.message="",this.backendErrors.email="",this.backendErrors.confirm_password="",this.backendErrors.message=""},3e3)},error:s=>{console.log(s),s.status===400?console.log(s.error):this.backendErrors.message="Error al actualizar el usuario"}})}};o.\u0275fac=function(g){return new(g||o)(u(w),u(H),u(U),u(I),u(F),u(G))},o.\u0275cmp=h({type:o,selectors:[["app-update"]],standalone:!0,features:[b],decls:43,vars:9,consts:[[1,"flex","mt-5","flex-col","justify-center"],[1,"sm:mx-auto","sm:w-1/2","sm:max-w-2xl"],["src","assets/logo.jpeg","alt","Logo",1,"mx-auto","h-32","w-auto"],[1,"mt-3","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-violet-950"],[1,"sm:mx-auto","sm:w-1/3","sm:max-w-2xl"],[1,"space-y-2",3,"formGroup"],["for","name",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["formControlName","name","name","name","type","text","autocomplete","nombre","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[4,"ngIf"],["for","lastname",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","last_name","name","lastname","type","text","autocomplete","nombre","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["for","role",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","is_active","name","role","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["value","1"],["value","0"],["formControlName","id_rol","name","role","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"flex","mb-10","w-full","justify-center","rounded-md","bg-fuchsia-500","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-cyan-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],["class","text-red-500 font-medium text-sm",4,"ngIf"],[1,"text-red-500","font-medium","text-sm"],[3,"value"],["for","hospital",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","id_hospital","name","hospital","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[1,"text-green-500","font-medium","text-sm"]],template:function(g,m){g&1&&(_(0,"app-toolbar"),i(1,"div",0)(2,"div",1),_(3,"img",2),i(4,"h2",3),a(5,"Actualizar Usuario"),t()(),i(6,"div",4)(7,"form",5)(8,"div")(9,"label",6),a(10,"Nombre"),t(),i(11,"div",7),_(12,"input",8),t(),d(13,Q,5,4,"div",9),t(),i(14,"div")(15,"label",10),a(16,"Apellidos"),t(),i(17,"div",7),_(18,"input",11),t(),d(19,te,5,4,"div",9),t(),i(20,"div")(21,"label",12),a(22,"Estado"),t(),i(23,"div",7)(24,"select",13)(25,"option",14),a(26,"Activo"),t(),i(27,"option",15),a(28,"Inactivo"),t()()(),d(29,oe,2,1,"div",9),t(),i(30,"div")(31,"label",12),a(32,"Rol"),t(),i(33,"div",7)(34,"select",16),d(35,ne,2,2,"option",17),t()(),d(36,ae,2,1,"div",9),t(),d(37,le,6,1,"div",9)(38,me,3,1,"div",9)(39,de,3,1,"div",9),i(40,"div")(41,"button",18),y("click",function(){return m.updateUser()}),a(42,"Actualizar"),t()()()()()),g&2&&(r(7),l("formGroup",m.updateForm),r(6),l("ngIf",m.updateForm.controls.name.errors),r(6),l("ngIf",m.updateForm.controls.last_name.errors),r(10),l("ngIf",m.updateForm.controls.id_rol.errors),r(6),l("ngForOf",m.roles),r(),l("ngIf",m.updateForm.controls.id_rol.errors),r(),l("ngIf",m.rolUser==1),r(),l("ngIf",m.succesMessages.message),r(),l("ngIf",m.backendErrors.message))},dependencies:[D,V,M,R,z,k,j,T,q,O,A,L,C,E,S]});let e=o;return e})();export{Ee as UpdateComponent};
