import{a as j}from"./chunk-N7WXRUGI.js";import{a as H}from"./chunk-NHY6G2KS.js";import"./chunk-VZAEZB6E.js";import{a as F,b as c,c as I,d as k,e as T,f as g,g as w,i as U,j as q,k as N,l as L,m as M,o as V,q as A}from"./chunk-FJBITYPR.js";import"./chunk-67ANC6KW.js";import{h as S,j as C}from"./chunk-6X3NTM2I.js";import{Ab as u,Ib as r,Jb as x,Qb as E,Sa as o,Ta as v,ga as _,gb as p,ib as a,kc as h,lc as y,qb as i,rb as t,sb as f,yb as b}from"./chunk-QODOQ2ZI.js";function z(e,n){e&1&&(i(0,"p",19),r(1,"El nombre es requerido"),t())}function D(e,n){e&1&&(i(0,"p",19),r(1,"El nombre debe contener al menos 3 caracteres"),t())}function G(e,n){e&1&&(i(0,"p",19),r(1,"El nombre debe contener maximo 100 caracteres"),t())}function R(e,n){e&1&&(i(0,"p",19),r(1,"El nombre solo debe contener letras y espacios"),t())}function O(e,n){if(e&1&&(i(0,"div"),p(1,z,2,0,"p",18)(2,D,2,0,"p",18)(3,G,2,0,"p",18)(4,R,2,0,"p",18),t()),e&2){let m=u();o(),a("ngIf",m.createForm.controls.nombre.errors.required),o(),a("ngIf",m.createForm.controls.nombre.errors.minlength),o(),a("ngIf",m.createForm.controls.nombre.errors.maxlength),o(),a("ngIf",m.createForm.controls.nombre.errors.pattern)}}function $(e,n){e&1&&(i(0,"p",19),r(1,"La direccion es requerida"),t())}function Z(e,n){e&1&&(i(0,"p",19),r(1,"La direccion debe contener al menos 3 caracteres"),t())}function B(e,n){e&1&&(i(0,"p",19),r(1,"La direccion debe contener maximo 100 caracteres"),t())}function J(e,n){if(e&1&&(i(0,"div"),p(1,$,2,0,"p",18)(2,Z,2,0,"p",18)(3,B,2,0,"p",18),t()),e&2){let m=u();o(),a("ngIf",m.createForm.controls.direccion.errors.required),o(),a("ngIf",m.createForm.controls.direccion.errors.minlength),o(),a("ngIf",m.createForm.controls.direccion.errors.maxlength)}}function K(e,n){e&1&&(i(0,"p",19),r(1,"El telefono es requerido"),t())}function P(e,n){e&1&&(i(0,"p",19),r(1,"El telefono debe tener un minimo de 10 digitos"),t())}function Q(e,n){e&1&&(i(0,"p",19),r(1,"El telefono debe tener un maximo de 10 digitos"),t())}function W(e,n){e&1&&(i(0,"p",19),r(1,"El telefono solo debe contener numeros"),t())}function X(e,n){if(e&1&&(i(0,"div"),p(1,K,2,0,"p",18)(2,P,2,0,"p",18)(3,Q,2,0,"p",18)(4,W,2,0,"p",18),t()),e&2){let m=u();o(),a("ngIf",m.createForm.controls.telefono.errors.required),o(),a("ngIf",m.createForm.controls.telefono.errors.minlength),o(),a("ngIf",m.createForm.controls.telefono.errors.maxlength),o(),a("ngIf",m.createForm.controls.telefono.errors.pattern)}}function Y(e,n){e&1&&(i(0,"p",19),r(1,"El estado es requerido"),t())}function ee(e,n){if(e&1&&(i(0,"div"),p(1,Y,2,0,"p",18),t()),e&2){let m=u();o(),a("ngIf",m.createForm.controls.is_active.errors.required)}}function te(e,n){if(e&1&&(i(0,"div")(1,"p",20),r(2),t()()),e&2){let m=u();o(2),x(m.succesMessages.message)}}function ie(e,n){if(e&1&&(i(0,"div")(1,"p",19),r(2),t()()),e&2){let m=u();o(2),x(m.backendErrors.message)}}var pe=(()=>{let n=class n{constructor(s,l,d){this.hospitalService=s,this.router=l,this.route=d,this.backendErrors={},this.succesMessages={},this.createForm=new T({nombre:new g("",[c.required,c.minLength(3),c.maxLength(100),c.pattern("^[a-zA-Z ]*$")]),direccion:new g("",[c.required,c.minLength(3),c.maxLength(100)]),telefono:new g("",[c.required,c.minLength(10),c.maxLength(10),c.pattern("^[0-9]*$")]),is_active:new g("",c.required)})}ngAfterContentInit(){this.hospitalService.getHospitalbyId(Number(this.route.snapshot.paramMap.get("id"))).subscribe({next:s=>{console.log(s),s.data&&s.data.is_active!==void 0?this.createForm.patchValue({nombre:s.data.nombre,direccion:s.data.direccion,telefono:s.data.telefono,is_active:s.data.is_active}):console.log("La respuesta no contiene datos v\xE1lidos para actualizar el hospital")},error:s=>{console.log(s)}})}updateHospital(){let s=this.createForm.value;s.is_active=s.is_active.toString(),console.log(s),this.hospitalService.updateHospital(s,Number(this.route.snapshot.paramMap.get("id"))).subscribe({next:l=>{console.log(l),l.data&&l.data.is_active!==void 0&&console.log(l.data.is_active),this.succesMessages.message="Hospital actualizado exitosamente",setTimeout(()=>{this.backendErrors={},this.router.navigate(["/hospitales"])},3e3)},error:l=>{this.backendErrors=l.error,console.log(l),l.error&&l.error.Errors&&(l.error.Errors.nombre?this.backendErrors.nombre="El nombre ya est\xE1 en uso":l.error.Errors.direccion?this.backendErrors.direccion="La direcci\xF3n ya est\xE1 en uso":l.error.Errors.telefono?this.backendErrors.telefono="El tel\xE9fono ya est\xE1 en uso":l.error.Errors.is_active?this.backendErrors.is_active="El estado no es v\xE1lido":this.backendErrors={message:"Error al crear el hospital"})}})}};n.\u0275fac=function(l){return new(l||n)(v(H),v(C),v(S))},n.\u0275cmp=_({type:n,selectors:[["app-update"]],standalone:!0,features:[E],decls:41,vars:11,consts:[[1,"flex","mt-10","flex-col","justify-center"],[1,"sm:mx-auto","sm:w-1/2","sm:max-w-2xl"],["src","assets/logo.jpeg","alt","Logo",1,"mx-auto","h-32","w-auto"],[1,"mt-3","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-violet-950"],[1,"sm:mx-auto","sm:w-1/3","sm:max-w-2xl"],[1,"space-y-2",3,"formGroup"],["for","name",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["formControlName","nombre","name","name","type","text","autocomplete","nombre","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[4,"ngIf"],["for","address",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","direccion","name","address","type","text","autocomplete","direccion","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["for","phone",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","telefono","name","phone","type","tel","autocomplete","telefono","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],["for","is_active",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["formControlName","is_active","name","is_active","autocomplete","is_active","required","",1,"pl-3","block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6"],[3,"ngValue","selected"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-fuchsia-500","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-cyan-700","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],["class","text-red-500 font-medium text-sm",4,"ngIf"],[1,"text-red-500","font-medium","text-sm"],[1,"text-green-500","font-medium","text-sm"]],template:function(l,d){l&1&&(f(0,"app-toolbar"),i(1,"div",0)(2,"div",1),f(3,"img",2),i(4,"h2",3),r(5,"Actualizar Hospital"),t()(),i(6,"div",4)(7,"form",5)(8,"div")(9,"label",6),r(10,"Nombre"),t(),i(11,"div",7),f(12,"input",8),t(),p(13,O,5,4,"div",9),t(),i(14,"div")(15,"label",10),r(16,"Direcci\xF3n"),t(),i(17,"div",7),f(18,"input",11),t(),p(19,J,4,3,"div",9),t(),i(20,"div")(21,"label",12),r(22,"Tel\xE9fono"),t(),i(23,"div",7),f(24,"input",13),t(),p(25,X,5,4,"div",9),t(),i(26,"div")(27,"label",14),r(28,"Estado"),t(),i(29,"div",7)(30,"select",15)(31,"option",16),r(32,"Activo"),t(),i(33,"option",16),r(34,"Inactivo"),t()()(),p(35,ee,2,1,"div",9),t(),p(36,te,3,1,"div",9)(37,ie,3,1,"div",9),i(38,"div")(39,"button",17),b("click",function(){return d.updateHospital()}),r(40,"Actualizar"),t()()()()()),l&2&&(o(7),a("formGroup",d.createForm),o(6),a("ngIf",d.createForm.controls.nombre.errors),o(6),a("ngIf",d.createForm.controls.direccion.errors),o(6),a("ngIf",d.createForm.controls.telefono.errors),o(6),a("ngValue",1)("selected",d.createForm.value.is_active===1),o(2),a("ngValue",0)("selected",d.createForm.value.is_active===0),o(2),a("ngIf",d.createForm.controls.is_active.errors),o(),a("ngIf",d.succesMessages.message),o(),a("ngIf",d.backendErrors.message))},dependencies:[j,y,h,A,w,L,M,F,N,I,k,V,U,q]});let e=n;return e})();export{pe as UpdateComponent};
